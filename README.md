# ğŸ“ˆ JTrading - çº¢åˆ©ä½æ³¢ETF (512890) æ™ºèƒ½ç›‘æ§ç³»ç»Ÿ

[![Daily RSI Check](https://github.com/Pear56/JTrading/actions/workflows/rsi_check.yml/badge.svg)](https://github.com/Pear56/JTrading/actions/workflows/rsi_check.yml)
[![Send Confirmation](https://github.com/Pear56/JTrading/actions/workflows/send_confirmation.yml/badge.svg)](https://github.com/Pear56/JTrading/actions/workflows/send_confirmation.yml)
[![GitHub Pages](https://img.shields.io/badge/GitHub%20Pages-Deployed-success)](https://pear56.github.io/JTrading/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

**JTrading** æ˜¯ä¸€ä¸ªåŸºäº GitHub Actions çš„ Serverless è‡ªåŠ¨åŒ–äº¤æ˜“è¾…åŠ©ç³»ç»Ÿã€‚å®ƒä¸“ä¸º **çº¢åˆ©ä½æ³¢ETF (512890)** è®¾è®¡ï¼Œèƒ½å¤Ÿå…¨è‡ªåŠ¨ç›‘æ§ RSI æŠ€æœ¯æŒ‡æ ‡ï¼Œæä¾›ç°ä»£åŒ–çš„å¯è§†åŒ–çœ‹æ¿ï¼Œå¹¶åœ¨å‡ºç°ä¹°å–ä¿¡å·æ—¶é€šè¿‡å¤šæ¸ é“å‘é€æé†’ã€‚

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### 1. ğŸ“Š ç°ä»£åŒ–å¯è§†åŒ–çœ‹æ¿
- **ç¯å½¢è¿›åº¦ä»ªè¡¨ç›˜**: é‡‡ç”¨å…¨æ–°çš„ç¯å½¢è¿›åº¦æ¡è®¾è®¡ï¼Œè§†è§‰ç„¦ç‚¹é›†ä¸­ï¼ŒRSI æ•°å€¼ä¸€ç›®äº†ç„¶ã€‚
- **åŠ¨æ€çŠ¶æ€åé¦ˆ**: ä»ªè¡¨ç›˜é¢œè‰²æ ¹æ® RSI çŠ¶æ€ï¼ˆè¶…ä¹°/è¶…å–/ä¸­æ€§ï¼‰è‡ªåŠ¨å˜åŒ– (ç»¿/çº¢/ç°)ã€‚
- **å“åº”å¼å¸ƒå±€**: åŸºäº CSS Grid çš„è‡ªé€‚åº”è®¾è®¡ï¼Œå®Œç¾é€‚é…æ¡Œé¢å¤§å±ä¸ç§»åŠ¨ç«¯è®¾å¤‡ã€‚
- **æ·±è‰²æ¨¡å¼**: æ”¯æŒç³»ç»Ÿçº§ Dark Modeï¼Œå¤œé—´æŸ¥çœ‹æ›´æŠ¤çœ¼ã€‚
- **å®æ—¶æ•°æ®**: å±•ç¤ºæœ€æ–°ä»·æ ¼ã€RSI æ•°å€¼åŠæ˜ç¡®çš„æ“ä½œå»ºè®®ã€‚

### 2. ğŸ¤– å…¨è‡ªåŠ¨æ™ºèƒ½ç›‘æ§
- **äº¤æ˜“æ—¶æ®µå·¡èˆª**: ä»…åœ¨ A è‚¡äº¤æ˜“æ—¶æ®µ (åŒ—äº¬æ—¶é—´ 09:00 - 15:00) æ¯å°æ—¶è‡ªåŠ¨è¿è¡Œä¸€æ¬¡ï¼ŒèŠ‚çœèµ„æºã€‚
- **æ•°æ®æŒä¹…åŒ–**: æ¯æ¬¡è¿è¡Œè‡ªåŠ¨ç”Ÿæˆé™æ€æ•°æ®æ–‡ä»¶ï¼Œé©±åŠ¨å‰ç«¯é¡µé¢æ›´æ–°ï¼Œæ— éœ€åç«¯æœåŠ¡å™¨ã€‚

### 3. ğŸ”” å¤šæ¸ é“å³æ—¶é€šçŸ¥
- **é‚®ä»¶æ¨é€**: è§¦å‘ä¹°å–é˜ˆå€¼æ—¶ï¼Œå‘é€åŒ…å«è¯¦ç»†æ•°æ®çš„ **HTML æ ¼å¼é‚®ä»¶**ï¼Œå†…ç½®å–æ¶ˆè®¢é˜…é“¾æ¥ã€‚
- **å¾®ä¿¡æé†’**: é›†æˆ Serveré…±ï¼Œæ”¯æŒå¾®ä¿¡ç«¯å³æ—¶æ¶ˆæ¯æ¨é€ã€‚

### 4. ğŸ“§ å…¨è‡ªåŠ¨è®¢é˜…ç®¡ç†
- **ä¸€é”®è®¢é˜…**: ç”¨æˆ·åœ¨ç½‘é¡µå¡«å†™é‚®ç®±åï¼Œè‡ªåŠ¨æ·»åŠ åˆ°è®¢é˜…åˆ—è¡¨ï¼Œæ— éœ€äººå·¥å¤„ç†ã€‚
- **Cloudflare Worker**: é€šè¿‡è¾¹ç¼˜è®¡ç®—å¤„ç†è®¢é˜…è¯·æ±‚ï¼Œç§’çº§å“åº”ã€‚
- **è‡ªåŠ¨ç¡®è®¤é‚®ä»¶**: æ–°è®¢é˜…è€…åœ¨ **1 åˆ†é’Ÿå†…** æ”¶åˆ°ç²¾ç¾çš„ HTML ç¡®è®¤é‚®ä»¶ã€‚
- **ç§æœ‰ Gist å­˜å‚¨**: è®¢é˜…è€…é‚®ç®±å®‰å…¨å­˜å‚¨åœ¨ç§æœ‰ Gist ä¸­ï¼Œæ”¯æŒ `#` æ³¨é‡Šè¡Œã€‚
- **åŒé‡ä¿é™©**: å‰ç«¯æ”¯æŒ Cloudflare Worker + Formspree åŒé‡å¤‡ä»½ï¼Œç¡®ä¿è®¢é˜…æœåŠ¡ç¨³å®šã€‚

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

æœ¬ç³»ç»Ÿå®Œå…¨åŸºäºå…è´¹æœåŠ¡æ„å»ºï¼Œé›¶æœåŠ¡å™¨æˆæœ¬ï¼š

```mermaid
graph LR
    A["GitHub Actions<br/>(å®šæ—¶ä»»åŠ¡)"] -->|è¿è¡Œ Python è„šæœ¬| B("æ•°æ®æŠ“å– & åˆ†æ")
    B -->|ç”Ÿæˆ| C{"RSI ä¿¡å·åˆ¤å®š"}
    C -->|è§¦å‘é˜ˆå€¼| D["å‘é€é€šçŸ¥<br/>(é‚®ä»¶/å¾®ä¿¡)"]
    C -->|æ›´æ–°æ•°æ®| E["ç”Ÿæˆ data.json"]
    E -->|æäº¤åˆ° main åˆ†æ”¯| F["GitHub Pages<br/>(é™æ€æ‰˜ç®¡)"]
    G[ç”¨æˆ·] -->|è®¿é—®| F
    G -->|è®¢é˜…| H["Cloudflare Worker"]
    H -->|å†™å…¥ pending é‚®ç®±| I["ç§æœ‰ Gist<br/>(è®¢é˜…è€…åˆ—è¡¨)"]
    I -.->|è¯»å–é‚®ç®±| D
    J["GitHub Actions<br/>(æ¯åˆ†é’Ÿæ£€æµ‹)"] -->|æ£€æµ‹ pending| I
    J -->|å‘é€ç¡®è®¤é‚®ä»¶| G
```

## ğŸ“‚ é¡¹ç›®ç»“æ„

```text
trading_rsi_app/
â”œâ”€â”€ .github/workflows/
â”‚   â”œâ”€â”€ rsi_check.yml           # RSI ç›‘æ§è°ƒåº¦ (Cron: 0 1-7 * * *)
â”‚   â””â”€â”€ send_confirmation.yml   # ç¡®è®¤é‚®ä»¶å‘é€ (Cron: æ¯åˆ†é’Ÿ)
â”œâ”€â”€ cloudflare-worker/
â”‚   â”œâ”€â”€ worker.js               # Cloudflare Worker è®¢é˜…æœåŠ¡
â”‚   â””â”€â”€ wrangler.toml           # Worker é…ç½®æ–‡ä»¶
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ index.html              # å‰ç«¯çœ‹æ¿ (HTML5 + CSS3 + Vanilla JS)
â”‚   â””â”€â”€ data.json               # (è‡ªåŠ¨ç”Ÿæˆ) æœ€æ–°ç›‘æ§æ•°æ®
â”œâ”€â”€ github_action_runner.py     # æ ¸å¿ƒè„šæœ¬: çˆ¬è™«ã€è®¡ç®—ã€é€šçŸ¥ã€ç”Ÿæˆæ•°æ®
â”œâ”€â”€ send_confirmation.py        # è®¢é˜…ç¡®è®¤é‚®ä»¶å‘é€è„šæœ¬
â”œâ”€â”€ requirements.txt            # Python ä¾èµ–åº“
â””â”€â”€ README.md                   # é¡¹ç›®æ–‡æ¡£
```

---

## ğŸš€ å¿«é€Ÿéƒ¨ç½²æŒ‡å— (Fork & Run)

åªéœ€ç®€å•å‡ æ­¥ï¼Œå³å¯æ‹¥æœ‰è‡ªå·±çš„ç›‘æ§ç³»ç»Ÿï¼š

### 1. Fork é¡¹ç›®
ç‚¹å‡»å³ä¸Šè§’ **Fork** æŒ‰é’®ï¼Œå°†ä»“åº“å¤åˆ¶åˆ°æ‚¨çš„ GitHub è´¦å·ä¸‹ã€‚

### 2. é…ç½® GitHub Secrets
è¿›å…¥ä»“åº“ **Settings** â†’ **Secrets and variables** â†’ **Actions** â†’ **Secrets**ï¼Œæ·»åŠ ä»¥ä¸‹å¯†é’¥ï¼š

| Secret åç§° | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
| :--- | :--- | :--- | :--- |
| `SENDER_EMAIL` | âœ… | å‘ä»¶äººé‚®ç®± (SMTP) | `example@126.com` |
| `SENDER_PASSWORD` | âœ… | é‚®ç®± SMTP æˆæƒç  | `abcdefghijklmn` |
| `SUBSCRIBER_EMAILS` | âš ï¸ | æ¥æ”¶é€šçŸ¥çš„é‚®ç®± (é€—å·åˆ†éš”ï¼Œæœªé…ç½® Gist æ—¶ä½¿ç”¨) | `me@qq.com,you@126.com` |
| `GIST_SUBSCRIBERS_URL` | âŒ | ç§æœ‰ Gist çš„ Raw URL | `https://gist.githubusercontent.com/...` |
| `GIST_TOKEN` | âŒ | GitHub Token (Gist åªè¯»ï¼Œç”¨äºè¯»å–è®¢é˜…åˆ—è¡¨) | `github_pat_xxx` |
| `GIST_TOKEN_WRITE` | âŒ | GitHub Token (Gist è¯»å†™ï¼Œç”¨äºæ›´æ–°è®¢é˜…çŠ¶æ€) | `github_pat_xxx` |
| `GIST_ID` | âŒ | Gist ID (ç”¨äºç¡®è®¤é‚®ä»¶åŠŸèƒ½) | `abc123def456` |
| `GIST_FILENAME` | âŒ | Gist æ–‡ä»¶å | `subscribers.txt` |
| `SUBSCRIBE_WORKER_URL` | âŒ | Cloudflare Worker åœ°å€ | `https://xxx.workers.dev` |
| `FORMSPREE_ID` | âŒ | Formspree è¡¨å• ID (å¤‡ç”¨è®¢é˜…æ–¹æ¡ˆ) | `xzzqlybo` |
| `SERVERCHAN_KEY` | âŒ | Serveré…± SendKey (å¾®ä¿¡é€šçŸ¥) | `SCTxxxxxxxx` |

> **âš ï¸ æ³¨æ„**ï¼šé»˜è®¤ä½¿ç”¨ `smtp.126.com`ã€‚å¦‚éœ€å…¶ä»–é‚®ç®±æœåŠ¡å•†ï¼Œè¯·é¢å¤–é…ç½® `SMTP_SERVER` å’Œ `SMTP_PORT`ã€‚

### 3. é…ç½® Variables (é˜ˆå€¼å‚æ•°ï¼Œå¯é€‰)
è¿›å…¥ **Settings** â†’ **Secrets and variables** â†’ **Actions** â†’ **Variables**ï¼Œæ·»åŠ å˜é‡ï¼š

| Variable åç§° | é»˜è®¤å€¼ | è¯´æ˜ |
| :--- | :--- | :--- |
| `RSI_BUY_THRESHOLD` | `40` | RSI **ä½äº** æ­¤å€¼è§¦å‘ä¹°å…¥æé†’ |
| `RSI_SELL_THRESHOLD` | `70` | RSI **é«˜äº** æ­¤å€¼è§¦å‘å–å‡ºæé†’ |

### 4. å¯ç”¨ GitHub Pages
1. è¿›å…¥ **Actions** é¡µé¢ï¼Œæ‰‹åŠ¨è§¦å‘ä¸€æ¬¡ "Daily RSI Check" å·¥ä½œæµã€‚
2. å¾…è¿è¡ŒæˆåŠŸåï¼Œè¿›å…¥ **Settings** â†’ **Pages**ã€‚
3. **Source** é€‰æ‹© `Deploy from a branch`ï¼Œåˆ†æ”¯é€‰æ‹© `main`ï¼Œæ–‡ä»¶å¤¹é€‰æ‹© `/docs`ã€‚
4. ä¿å­˜åï¼Œæ‚¨çš„çœ‹æ¿å°†åœ¨ `https://<æ‚¨çš„ç”¨æˆ·å>.github.io/JTrading/` ä¸Šçº¿ã€‚

---

## ğŸ“§ é…ç½®è‡ªåŠ¨è®¢é˜…åŠŸèƒ½ (æ¨è)

å®ç°ç”¨æˆ·åœ¨ç½‘é¡µè®¢é˜…åï¼Œé‚®ç®±è‡ªåŠ¨æ·»åŠ åˆ°è®¢é˜…åˆ—è¡¨ï¼Œå¹¶åœ¨ **1 åˆ†é’Ÿå†…æ”¶åˆ°ç¡®è®¤é‚®ä»¶**ã€‚

### å·¥ä½œæµç¨‹

```
ç”¨æˆ·è®¢é˜… â†’ Cloudflare Worker â†’ å†™å…¥ [pending] email åˆ° Gist
                                        â†“
                              GitHub Actions (æ¯åˆ†é’Ÿæ£€æµ‹)
                                        â†“
                              å‘é€ HTML ç¡®è®¤é‚®ä»¶
                                        â†“
                              ç§»é™¤ [pending] æ ‡è®°
```

### æ­¥éª¤ 1: åˆ›å»ºç§æœ‰ Gist

1. è®¿é—® [gist.github.com](https://gist.github.com/)
2. åˆ›å»ºä¸€ä¸ª **Secret gist**ï¼ˆç§æœ‰ï¼‰ï¼š
   - **æ–‡ä»¶å**ï¼š`subscribers.txt`
   - **å†…å®¹**ï¼š
     ```
     # è®¢é˜…è€…é‚®ç®±åˆ—è¡¨ï¼ˆ# å¼€å¤´çš„ä¸ºæ³¨é‡Šï¼‰
     your_email@example.com
     ```
3. åˆ›å»ºåï¼Œè®°å½•ä»¥ä¸‹ä¿¡æ¯ï¼š
   - **Gist ID**ï¼šURL ä¸­çš„ IDï¼ˆå¦‚ `https://gist.github.com/Pear56/abc123` ä¸­çš„ `abc123`ï¼‰
   - **Raw URL**ï¼šç‚¹å‡» `Raw` æŒ‰é’®åçš„å®Œæ•´ URL

### æ­¥éª¤ 2: åˆ›å»º GitHub Token

éœ€è¦åˆ›å»º **ä¸¤ä¸ª Token**ï¼ˆæƒé™ä¸åŒï¼‰ï¼š

#### Token 1: Gist åªè¯»ï¼ˆç”¨äº GitHub Actions è¯»å–è®¢é˜…åˆ—è¡¨ï¼‰
1. è®¿é—® [GitHub Token è®¾ç½®](https://github.com/settings/tokens?type=beta)
2. **Generate new token** â†’ **Fine-grained token**
3. æƒé™ï¼š**Account permissions** â†’ **Gists** â†’ `Read-only`
4. ç”Ÿæˆå¹¶å¤åˆ¶ï¼Œæ·»åŠ åˆ° GitHub Secrets çš„ `GIST_TOKEN`

#### Token 2: Gist è¯»å†™ï¼ˆç”¨äº Worker å†™å…¥ + Actions æ›´æ–°çŠ¶æ€ï¼‰
1. å†æ¬¡åˆ›å»ºä¸€ä¸ªæ–° Token
2. æƒé™ï¼š**Account permissions** â†’ **Gists** â†’ `Read and write`
3. ç”Ÿæˆå¹¶å¤åˆ¶ï¼Œæ·»åŠ åˆ°ï¼š
   - GitHub Secrets çš„ `GIST_TOKEN_WRITE`
   - Cloudflare Worker çš„ `GITHUB_TOKEN`

### æ­¥éª¤ 3: éƒ¨ç½² Cloudflare Worker

1. è®¿é—® [Cloudflare Dashboard](https://dash.cloudflare.com/)
2. è¿›å…¥ **Workers & Pages** â†’ **Create** â†’ **Create Worker**
3. åç§°å¡«ï¼š`jtrading-subscribe`ï¼Œç‚¹å‡» **Deploy**
4. ç‚¹å‡» **Edit code**ï¼Œå°† `cloudflare-worker/worker.js` çš„å†…å®¹ç²˜è´´è¿›å»
5. ç‚¹å‡» **Save and Deploy**
6. è¿›å…¥ **Settings** â†’ **Variables and Secrets**ï¼Œæ·»åŠ ï¼š

   | å˜é‡å | å€¼ | ç±»å‹ |
   |--------|---|------|
   | `GIST_ID` | Gist URL ä¸­çš„ ID | Text |
   | `GIST_FILENAME` | `subscribers.txt` | Text |
   | `GITHUB_TOKEN` | Gist **è¯»å†™** Token | **Secret** |
   | `ALLOWED_ORIGIN` | `https://<ä½ çš„ç”¨æˆ·å>.github.io` | Text |

7. å¤åˆ¶ Worker URLï¼ˆå¦‚ `https://jtrading-subscribe.xxx.workers.dev`ï¼‰

### æ­¥éª¤ 4: æ·»åŠ  Secrets åˆ° GitHub

åœ¨ä»“åº“ Secrets ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

| Secret åç§° | å€¼ |
|------------|---|
| `SUBSCRIBE_WORKER_URL` | Worker çš„å®Œæ•´ URL |
| `GIST_ID` | ä½ çš„ Gist ID |
| `GIST_FILENAME` | `subscribers.txt` |
| `GIST_TOKEN_WRITE` | Gist è¯»å†™ Token |

### âœ… å®Œæˆï¼

æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡ GitHub Actionsï¼Œå‰ç«¯å°†è‡ªåŠ¨è¿æ¥åˆ°æ‚¨çš„è®¢é˜…æœåŠ¡ã€‚æ–°è®¢é˜…è€…å°†åœ¨ **1 åˆ†é’Ÿå†…** æ”¶åˆ°ç²¾ç¾çš„ HTML ç¡®è®¤é‚®ä»¶ï¼

---

## ğŸ”„ å¤‡ç”¨è®¢é˜…æ–¹æ¡ˆ (Formspree)

å¦‚æœä¸æƒ³é…ç½® Cloudflare Workerï¼Œå¯ä»¥ä½¿ç”¨ Formspree ä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆï¼š

1. è®¿é—® [formspree.io](https://formspree.io) æ³¨å†Œ
2. åˆ›å»ºè¡¨å•ï¼Œè·å–è¡¨å• IDï¼ˆå¦‚ `xzzqlybo`ï¼‰
3. æ·»åŠ åˆ° GitHub Secretsï¼š`FORMSPREE_ID`

> **æ³¨æ„**ï¼šFormspree åªæ”¶é›†é‚®ç®±ï¼Œä¸ä¼šè‡ªåŠ¨æ·»åŠ åˆ°è®¢é˜…åˆ—è¡¨ï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†ã€‚

---

## ğŸ’» æœ¬åœ°å¼€å‘

å¦‚æœæ‚¨æƒ³åœ¨æœ¬åœ°ä¿®æ”¹å‰ç«¯æˆ–è°ƒè¯•è„šæœ¬ï¼š

1.  **å®‰è£…ä¾èµ–**:
    ```bash
    pip install -r requirements.txt
    ```
2.  **è®¾ç½®ç¯å¢ƒå˜é‡** (PowerShell ç¤ºä¾‹):
    ```powershell
    $env:SENDER_EMAIL="your_email@126.com"
    $env:SENDER_PASSWORD="your_smtp_password"
    $env:SUBSCRIBER_EMAILS="test@example.com"
    # æˆ–è€…ä½¿ç”¨ Gist æ–¹å¼
    # $env:GIST_SUBSCRIBERS_URL="https://gist.githubusercontent.com/..."
    # $env:GIST_TOKEN="github_pat_xxxxx"
    ```
3.  **è¿è¡Œè„šæœ¬**:
    ```bash
    python github_action_runner.py
    ```
    è„šæœ¬è¿è¡Œåä¼šåœ¨ `docs` ç›®å½•ä¸‹ç”Ÿæˆ `data.json`ï¼Œæ‚¨å¯ä»¥ç›´æ¥æ‰“å¼€ `docs/index.html` æŸ¥çœ‹æ•ˆæœã€‚

---

## âš ï¸ å…è´£å£°æ˜

æœ¬é¡¹ç›®ä»…ä¾›ç¼–ç¨‹å­¦ä¹ å’ŒæŠ€æœ¯äº¤æµä½¿ç”¨ï¼Œæ•°æ®æ¥æºäºç½‘ç»œï¼Œä¸ä¿è¯å‡†ç¡®æ€§ä¸å®æ—¶æ€§ã€‚**æœ¬é¡¹ç›®ä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®**ã€‚å¸‚åœºæœ‰é£é™©ï¼ŒæŠ•èµ„éœ€è°¨æ…ã€‚

## ğŸ“„ è®¸å¯è¯

MIT License
